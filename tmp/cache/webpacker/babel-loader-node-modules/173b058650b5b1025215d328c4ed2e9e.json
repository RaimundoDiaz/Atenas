{"ast":null,"code":"$(document).ready(function () {\n  //transformar la variable de ruby a un json\n  var comunas = \"<%= @regiones[0].to_json %>\";\n  comunas = comunas.replace(/&quot;/g, '\\\"');\n  console.log(comunas);\n  comunas = JSON.parse(comunas);\n  comunas = comunas.comunas; // [{codigo : 1231, nombre: \"\", ...}]\n\n  console.log(comunas); //agregar al select de comunas los datos del json\n\n  $.each(comunas, function (i, item) {\n    $('#company_comuna').append($('<option>', {\n      value: item.codigo,\n      text: item.nombre\n    }));\n  }); //preparar lo anterior para cada vez que se cambie el select de regiones\n\n  $(\"#company_region\").change(function () {\n    //seleccionar las comunas de la region correspondiente\n    var regiones = \"<%= @regiones.to_json %>\";\n    regiones = regiones.replace(/&quot;/g, '\\\"');\n    regiones = JSON.parse(regiones);\n    var option = $(this).val();\n    console.log(\"opcion = \" + option);\n    var nuevas_comunas = $.grep(regiones, function (region) {\n      return region.codigo == option;\n    });\n    nuevas_comunas = nuevas_comunas[0].comunas;\n    console.log(nuevas_comunas); //borrar las opciones actuales\n\n    $('#company_comuna').children().remove(); //agregar al select de comunas los datos del json\n\n    $.each(nuevas_comunas, function (i, item) {\n      $('#company_comuna').append($('<option>', {\n        value: item.codigo,\n        text: item.nombre\n      }));\n    });\n  });\n});","map":{"version":3,"sources":["/home/toor/Desktop/Atenas/app/javascript/packs/procedures.js"],"names":["$","document","ready","comunas","replace","console","log","JSON","parse","each","i","item","append","value","codigo","text","nombre","change","regiones","option","val","nuevas_comunas","grep","region","children","remove"],"mappings":"AAAAA,CAAC,CAACC,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAU;AACxB;AACA,MAAIC,OAAO,GAAG,6BAAd;AACAA,EAAAA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAgB,SAAhB,EAA0B,IAA1B,CAAV;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AACAA,EAAAA,OAAO,GAAGI,IAAI,CAACC,KAAL,CAAWL,OAAX,CAAV;AACAA,EAAAA,OAAO,GAAGA,OAAO,CAACA,OAAlB,CANwB,CAMG;;AAC3BE,EAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ,EAPwB,CASxB;;AACAH,EAAAA,CAAC,CAACS,IAAF,CAAON,OAAP,EAAgB,UAAUO,CAAV,EAAaC,IAAb,EAAmB;AAC/BX,IAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBY,MAArB,CAA4BZ,CAAC,CAAC,UAAD,EAAa;AACtCa,MAAAA,KAAK,EAAEF,IAAI,CAACG,MAD0B;AAEtCC,MAAAA,IAAI,EAAGJ,IAAI,CAACK;AAF0B,KAAb,CAA7B;AAIH,GALD,EAVwB,CAiBxB;;AACAhB,EAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBiB,MAArB,CAA4B,YAAU;AAClC;AACA,QAAIC,QAAQ,GAAG,0BAAf;AACAA,IAAAA,QAAQ,GAAGA,QAAQ,CAACd,OAAT,CAAiB,SAAjB,EAA2B,IAA3B,CAAX;AACAc,IAAAA,QAAQ,GAAGX,IAAI,CAACC,KAAL,CAAWU,QAAX,CAAX;AACA,QAAIC,MAAM,GAAGnB,CAAC,CAAC,IAAD,CAAD,CAAQoB,GAAR,EAAb;AACAf,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAca,MAA1B;AACA,QAAIE,cAAc,GAAGrB,CAAC,CAACsB,IAAF,CAAOJ,QAAP,EAAiB,UAASK,MAAT,EAAiB;AAAE,aAAOA,MAAM,CAACT,MAAP,IAAiBK,MAAxB;AAAiC,KAArE,CAArB;AACAE,IAAAA,cAAc,GAAGA,cAAc,CAAC,CAAD,CAAd,CAAkBlB,OAAnC;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYe,cAAZ,EATkC,CAWlC;;AACArB,IAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBwB,QAArB,GAAgCC,MAAhC,GAZkC,CAclC;;AACAzB,IAAAA,CAAC,CAACS,IAAF,CAAOY,cAAP,EAAuB,UAAUX,CAAV,EAAaC,IAAb,EAAmB;AACtCX,MAAAA,CAAC,CAAC,iBAAD,CAAD,CAAqBY,MAArB,CAA4BZ,CAAC,CAAC,UAAD,EAAa;AACtCa,QAAAA,KAAK,EAAEF,IAAI,CAACG,MAD0B;AAEtCC,QAAAA,IAAI,EAAGJ,IAAI,CAACK;AAF0B,OAAb,CAA7B;AAIH,KALD;AAMH,GArBD;AAsBH,CAxCD","sourcesContent":["$(document).ready(function(){\n    //transformar la variable de ruby a un json\n    var comunas = \"<%= @regiones[0].to_json %>\";\n    comunas = comunas.replace(/&quot;/g,'\\\"');\n    console.log(comunas)\n    comunas = JSON.parse(comunas);\n    comunas = comunas.comunas; // [{codigo : 1231, nombre: \"\", ...}]\n    console.log(comunas);\n\n    //agregar al select de comunas los datos del json\n    $.each(comunas, function (i, item) {\n        $('#company_comuna').append($('<option>', {\n            value: item.codigo,\n            text : item.nombre\n        }));\n    });\n\n    //preparar lo anterior para cada vez que se cambie el select de regiones\n    $(\"#company_region\").change(function(){\n        //seleccionar las comunas de la region correspondiente\n        var regiones = \"<%= @regiones.to_json %>\";\n        regiones = regiones.replace(/&quot;/g,'\\\"');\n        regiones = JSON.parse(regiones);\n        var option = $(this).val();\n        console.log(\"opcion = \" + option);\n        var nuevas_comunas = $.grep(regiones, function(region) { return region.codigo == option; });\n        nuevas_comunas = nuevas_comunas[0].comunas;\n        console.log(nuevas_comunas);\n\n        //borrar las opciones actuales\n        $('#company_comuna').children().remove();\n\n        //agregar al select de comunas los datos del json\n        $.each(nuevas_comunas, function (i, item) {\n            $('#company_comuna').append($('<option>', {\n                value: item.codigo,\n                text : item.nombre\n            }));\n        });\n    });\n});"]},"metadata":{},"sourceType":"module"}